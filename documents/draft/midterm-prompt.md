# midterm report

(prmopt：此文件仅作为一篇草稿，随时修改，共LLM读取作为编写文案的参考，里面仅作实验思路、结果等内容的口语化描述，或填充内容的方向概述。正式版将使用学术的英文，并以latex格式编写。latex模板也在这个目录中，但是为防止ide自动编译添加了.txt后缀。其中标题信息部分已编辑好只需编写主体部分。总篇幅8页以内)

## introduction

(prompt：此部分篇幅尽量简洁，可参考outline)

### background

介绍背景，自来水厂给水管路中的DBPs研究的意义。实验的目的是通过监督机器学习，回归预测管路中特定阶段的DBPs。(prompt: 此部分可加入参考文献)

### DBPs的来源

消毒需投氯、石灰、铵盐，反应生成次氯酸钙作为主产物，副产物有类氯胺的物质，也就是DBPs。(prompt: 此部分需细化讲解反应过程，罗列反应式，也可参考部分文献)

## method

### 反应器

共五个stage

1. 自来水厂原出水FWT(不作研究)
2. 投药后并混合的消毒池DT
3. 暂存的tankRT
4. 一阶段管路PPL1(较粗)
5. 二阶段管路PPL2(较细)

### 原始数据获取

通过传感器获取TRC				pH				Conductivity				fDOM (QSU)			DO			TOC			DOC		，每个value在部分stage测量(根据raw_data生成表格展示每个值在每个stage是否测量)测量间隔5分钟。

## progress

### 数据预处理

#### 补全

PPL1和PPL2使用的是一个传感器，间隔半小时交替测量，所以每6组数据后会有6组空缺值，交替出现。所以需要补全。(prompt: 接下来参考缺失填充.md来介绍缺失填充方法，使用学术化的语言。然后生成18行补充中间6行的例子，展示补全过程，递增趋势加微小波动)

#### 时间对齐

(prompt: 参考时间对齐.md，给出每个stage之间的间隔时间，写出同一批液体流经各个stage对应时间差值的关系，并用学术化语言描述时间对齐过程，再以TRC为例给出对齐后表格的一行是从原表格中如何提取的)

### 模型选择

- MLP
- RNN
- GRU
- LSTM

(prompt:待选模型只用几句话简短介绍)

### 模型训练与调参

#### 训练的设计

(prompt: 简要描述神经网络训练的原理如loss的概念、梯度下降，反向传播等，再点出本次项目的数据集划分、训练和验证的loss选取，固定epoch轮数与早停机制，早停机制的描述见1109.md)

#### 超参数的调参方法

(prompt: 简要说明可调整的超参数的意义，包括batch size, learning rate, dropout, decay, units与layers；以及时序模型特有的history length。接下来一段再简要介绍对比网格搜索、随机搜索、贝叶斯优化这几个超参数优化方法，然后给出贝叶斯优化的优点即本实验项目选取其的原因)

### 实验中的方案改进

原始输入输出内容：即输入是DT RT的所有数据，输出是PPL1 PPL2的所有数据，模型采用多输出头同时输出

#### "rate"回归

(prompt: 参考1115.md，讲解这一公式变形的理由)

#### TRC作为单输出

TRC对DBPs决定性最强但模型回归效果最差，所以把TRC单独输出，其余参数多输出

### test & results

把贝叶斯调参中表现最佳的一组超参数的模型对训练集进行回归，并以ppl2中，trc单输出，其余参数多输出中的ph, toc统计mse和mae。结果如表格。

## conclusion

(prompt: 总结需参考实验结果，暂时放空不生成)

## Future Directions

- 等待明年获取的数据，扩大数据集
- 增加贝叶斯调参的trials轮数使每个模型最终的结果更优化
- 增加transformer模型以及近年的sota时序模型，如itransformer patchtst等
- 根据后续实验人工采用仪器测量的的DBPs数据，与模型输出的数据，建立下一级模型来实现从TRC TOC pH等测量值到DBPs值的映射关系，如示意图